<aside
    class="fixed top-14 left-0 bottom-0 z-40 w-64 pt-4 transition-transform -translate-x-full sm:translate-x-0 bg-sidebar border-r border-sidebar-border flex flex-col"
    aria-label="Sidebar">

    <div class="h-full px-3 py-2 overflow-y-auto bg-sidebar flex flex-col custom-scrollbar">

        <!-- Navigation Header -->
        <div class="px-3 mb-4 mt-2 flex justify-between items-start text-muted-foreground">
            <div class="flex flex-col">
                <span class="text-xs font-bold text-white uppercase tracking-widest leading-none mb-1">Navigation</span>
            </div>
            <i class="fas fa-outdent cursor-pointer hover:text-white transition-colors mt-1"></i>
        </div>

        <!-- OVERVIEW SECTION -->
        <div class="px-3 mb-2 mt-2">
            <span
                class="text-[10px] font-bold text-muted-foreground uppercase tracking-wider opacity-70">Overview</span>
        </div>
        <ul class="space-y-1 font-medium list-none pl-0 mb-6">
            <li>
                <a href="{{ url_for('views.static_html', route='/') }}"
                    class="flex items-center px-3 py-2.5 rounded-lg group transition-all duration-200 no-underline {% if request.path == '/' %}bg-white/5 border-l-2 border-primary text-white shadow-[0_0_20px_rgba(124,66,240,0.15)]{% else %}text-muted-foreground hover:bg-white/5 hover:text-white hover:pl-4{% endif %}">
                    <i
                        class="fas fa-home w-5 h-5 text-center transition-colors {% if request.path == '/' %}text-primary{% else %}text-muted-foreground group-hover:text-white{% endif %}"></i>
                    <span class="ms-3 text-sm tracking-wide">Dashboard</span>
                </a>
            </li>

            {% for page in Plugins.user_menu_pages %}
            <li>
                <a href="{{ page.route }}" {% if page.link_target %}target="{{ page.link_target }}" {% endif %}
                    class="flex items-center px-3 py-2.5 rounded-lg group transition-all duration-200 no-underline {% if request.path == page.route %}bg-white/5 border-l-2 border-primary text-white shadow-[0_0_20px_rgba(124,66,240,0.15)]{% else %}text-muted-foreground hover:bg-white/5 hover:text-white hover:pl-4{% endif %}">
                    <i class="fas fa-file-alt w-5 h-5 text-center text-muted-foreground group-hover:text-white"></i>
                    <span class="ms-3 text-sm tracking-wide">{{ page.title }}</span>
                </a>
            </li>
            {% endfor %}

            {% if Configs.account_visibility != 'admins' %}
            <li>
                <a href="{{ url_for('users.listing') }}"
                    class="flex items-center px-3 py-2.5 rounded-lg group transition-all duration-200 no-underline {% if request.path == '/users' %}bg-white/5 border-l-2 border-primary text-white shadow-[0_0_20px_rgba(124,66,240,0.15)]{% else %}text-muted-foreground hover:bg-white/5 hover:text-white hover:pl-4{% endif %}">
                    <i
                        class="fas fa-users w-5 h-5 text-center transition-colors {% if request.path == '/users' %}text-primary{% else %}text-muted-foreground group-hover:text-white{% endif %}"></i>
                    <span class="ms-3 text-sm tracking-wide">Users</span>
                </a>
            </li>
            {% if Configs.user_mode == 'teams' %}
            <li>
                <a href="{{ url_for('teams.listing') }}"
                    class="flex items-center px-3 py-2.5 rounded-lg group transition-all duration-200 no-underline {% if request.path == '/teams' %}bg-white/5 border-l-2 border-primary text-white shadow-[0_0_20px_rgba(124,66,240,0.15)]{% else %}text-muted-foreground hover:bg-white/5 hover:text-white hover:pl-4{% endif %}">
                    <i
                        class="fas fa-users-cog w-5 h-5 text-center transition-colors {% if request.path == '/teams' %}text-primary{% else %}text-muted-foreground group-hover:text-white{% endif %}"></i>
                    <span class="ms-3 text-sm tracking-wide">Teams</span>
                </a>
            </li>
            {% endif %}
            {% endif %}

            {% if Configs.account_visibility != 'admins' and Configs.score_visibility != 'admins' %}
            <li>
                <a href="{{ url_for('scoreboard.listing') }}"
                    class="flex items-center px-3 py-2.5 rounded-lg group transition-all duration-200 no-underline {% if request.path == '/scoreboard' %}bg-white/5 border-l-2 border-primary text-white shadow-[0_0_20px_rgba(124,66,240,0.15)]{% else %}text-muted-foreground hover:bg-white/5 hover:text-white hover:pl-4{% endif %}">
                    <i
                        class="fas fa-trophy w-5 h-5 text-center transition-colors {% if request.path == '/scoreboard' %}text-primary{% else %}text-muted-foreground group-hover:text-white{% endif %}"></i>
                    <span class="ms-3 text-sm tracking-wide">Scoreboard</span>
                </a>
            </li>
            {% endif %}
        </ul>

        <!-- WARGAMES SECTION -->
        <div class="px-3 mb-2">
            <span
                class="text-[10px] font-bold text-muted-foreground uppercase tracking-wider opacity-70">Wargames</span>
        </div>
        <ul class="space-y-1 font-medium list-none pl-0 mb-auto">
            <li>
                <a href="{{ url_for('challenges.listing') }}"
                    class="flex items-center px-3 py-2.5 rounded-lg group transition-all duration-200 no-underline {% if request.path == '/challenges' %}bg-primary/10 border-l-2 border-primary text-white shadow-[0_0_20px_rgba(124,66,240,0.2)]{% else %}text-muted-foreground hover:bg-white/5 hover:text-white hover:pl-4{% endif %}">
                    <i
                        class="fas fa-flag w-5 h-5 text-center transition-colors {% if request.path == '/challenges' %}text-primary{% else %}text-muted-foreground group-hover:text-white{% endif %}"></i>
                    <span class="ms-3 text-sm tracking-wide">Challenges</span>
                </a>
            </li>
        </ul>

        <div class="h-px bg-sidebar-border/50 my-4"></div>

        <!-- ACCOUNT SECTION -->
        {% if authed() %}
        <div class="px-3 mb-2">
            <span class="text-[10px] font-bold text-muted-foreground uppercase tracking-wider opacity-70">Account</span>
        </div>
        <ul class="space-y-1 font-medium list-none pl-0 mb-auto">

            <!-- Notifications -->
            <li>
                <a href="{{ url_for('views.notifications') }}"
                    class="flex items-center px-3 py-2 rounded-lg text-muted-foreground hover:text-white group transition-colors duration-200 no-underline justify-between">
                    <div class="flex items-center">
                        <i
                            class="fas fa-bell w-4 h-4 text-center transition duration-75 text-muted-foreground group-hover:text-white"></i>
                        <span class="ms-3 text-xs font-semibold tracking-wide uppercase">Notifications</span>
                    </div>
                    <span x-data x-show="$store.unread_count > 0" x-text="$store.unread_count"
                        class="bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full"></span>
                </a>
            </li>

            <!-- My Team -->
            {% if Configs.user_mode == "teams" %}
            <li>
                <a href="{{ url_for('teams.private') }}"
                    class="flex items-center px-3 py-2 rounded-lg text-muted-foreground hover:text-white group transition-colors duration-200 no-underline">
                    <i
                        class="fas fa-users w-4 h-4 text-center transition duration-75 text-muted-foreground group-hover:text-white"></i>
                    <span class="ms-3 text-xs font-semibold tracking-wide uppercase">My Team</span>
                </a>
            </li>
            {% endif %}

            <!-- Profile -->
            <li>
                <a href="{{ url_for('users.private') }}"
                    class="flex items-center px-3 py-2 rounded-lg text-muted-foreground hover:text-white group transition-colors duration-200 no-underline">
                    <i
                        class="fas fa-user-circle w-4 h-4 text-center transition duration-75 text-muted-foreground group-hover:text-white"></i>
                    <span class="ms-3 text-xs font-semibold tracking-wide uppercase">Profile</span>
                </a>
            </li>

            <!-- Settings -->
            <li>
                <a href="{{ url_for('views.settings') }}"
                    class="flex items-center px-3 py-2 rounded-lg text-muted-foreground hover:text-white group transition-colors duration-200 no-underline">
                    <i
                        class="fas fa-cog w-4 h-4 text-center transition duration-75 text-muted-foreground group-hover:text-white"></i>
                    <span class="ms-3 text-xs font-semibold tracking-wide uppercase">Settings</span>
                </a>
            </li>

            <!-- Logout -->
            <li>
                <a href="{{ url_for('auth.logout') }}"
                    class="flex items-center px-3 py-2 rounded-lg text-muted-foreground hover:text-red-400 group transition-colors duration-200 no-underline">
                    <i
                        class="fas fa-sign-out-alt w-4 h-4 text-center transition duration-75 text-muted-foreground group-hover:text-red-400"></i>
                    <span class="ms-3 text-xs font-semibold tracking-wide uppercase">Logout</span>
                </a>
            </li>

            {% if is_admin() %}
            <div class="h-px bg-sidebar-border/50 my-2"></div>
            <li>
                <a href="{{ url_for('admin.view') }}"
                    class="flex items-center px-3 py-2 rounded-lg text-muted-foreground hover:text-white group transition-colors duration-200 no-underline">
                    <i
                        class="fas fa-wrench w-4 h-4 text-center transition duration-75 text-muted-foreground group-hover:text-white"></i>
                    <span class="ms-3 text-xs font-semibold tracking-wide uppercase">Admin Panel</span>
                </a>
            </li>
            {% endif %}

        </ul>
        {% else %}
        <!-- AUTH SECTION -->
        <div class="px-3 mb-2 mt-auto">
            <span class="text-[10px] font-bold text-muted-foreground uppercase tracking-wider opacity-70">Auth</span>
        </div>
        <ul class="space-y-1 font-medium list-none pl-0">
            {% if registration_visible() %}
            <li>
                <a href="{{ url_for('auth.register') }}"
                    class="flex items-center px-3 py-2 rounded-lg text-muted-foreground hover:text-white group transition-colors duration-200 no-underline">
                    <i
                        class="fas fa-user-plus w-4 h-4 text-center transition duration-75 text-muted-foreground group-hover:text-white"></i>
                    <span class="ms-3 text-xs font-semibold tracking-wide uppercase">Register</span>
                </a>
            </li>
            {% endif %}
            <li>
                <a href="{{ url_for('auth.login') }}"
                    class="flex items-center px-3 py-2 rounded-lg text-muted-foreground hover:text-white group transition-colors duration-200 no-underline">
                    <i
                        class="fas fa-sign-in-alt w-4 h-4 text-center transition duration-75 text-muted-foreground group-hover:text-white"></i>
                    <span class="ms-3 text-xs font-semibold tracking-wide uppercase">Login</span>
                </a>
            </li>
        </ul>
        {% endif %}

        <div class="mt-6 px-3 space-y-1.5">
            <div class="flex items-center gap-2 text-[10px] text-muted-foreground">
                <span class="inline-block w-2 h-2 rounded-full bg-green-500 shrink-0" aria-hidden="true"></span>
                <span>Online</span>
            </div>
            <div class="text-[10px] text-muted-foreground opacity-80">
                A product of {{ Configs.ctf_name }}
            </div>
            <div class="text-[10px] text-muted-foreground opacity-60">
                Â© 2026 {{ Configs.ctf_name }}
            </div>
        </div>
    </div>
</aside>