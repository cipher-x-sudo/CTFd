import{d as p,c as d,m as l,C as s}from"./index.js";import{c as y,m as w}from"./math.js";import{e as S}from"./index2.js";import"./echarts.js";function k(o,t,n){let i={backgroundColor:"transparent",tooltip:{trigger:"axis",backgroundColor:"rgba(10, 10, 15, 0.9)",borderColor:"rgba(255, 255, 255, 0.1)",textStyle:{color:"#fff",fontFamily:"Inter, sans-serif"},axisPointer:{type:"cross",lineStyle:{color:"rgba(255, 255, 255, 0.2)",width:1}}},legend:{type:"scroll",orient:"horizontal",align:"left",bottom:0,icon:"circle",textStyle:{color:"rgba(255, 255, 255, 0.8)",fontFamily:"Inter, sans-serif",fontSize:12},itemGap:24,itemWidth:10,itemHeight:10,data:[]},toolbox:{show:!0,feature:{saveAsImage:{title:"Save",iconStyle:{borderColor:"rgba(255, 255, 255, 0.5)"}}},right:20,top:0},grid:{left:"3%",right:"5%",bottom:"12%",top:"8%",containLabel:!0},xAxis:[{type:"time",boundaryGap:!1,axisLine:{show:!1},splitLine:{show:!0,lineStyle:{color:"rgba(255, 255, 255, 0.05)",type:"dashed"}},axisLabel:{color:"rgba(255, 255, 255, 0.4)",fontSize:11,margin:15},axisTick:{show:!1}}],yAxis:[{type:"value",axisLine:{show:!1},splitLine:{show:!0,lineStyle:{color:"rgba(255, 255, 255, 0.05)",type:"dashed"}},axisLabel:{color:"rgba(255, 255, 255, 0.4)",fontSize:11,formatter:e=>e.toLocaleString(),margin:15}}],series:[]};const a=Object.keys(t);for(let e=0;e<a.length;e++){const h=[],m=[];for(let r=0;r<t[a[e]].solves.length;r++){h.push(t[a[e]].solves[r].value);const c=p(t[a[e]].solves[r].date);m.push(c.toDate())}const b=y(h);let u=m.map(function(r,c){return[r,b[c]]});i.legend.data.push(t[a[e]].name);const f={name:t[a[e]].name,type:"line",smooth:!1,symbol:"circle",symbolSize:6,showSymbol:!0,lineStyle:{width:1.5,shadowBlur:4,shadowColor:d(t[a[e]].name+t[a[e]].id)},areaStyle:{opacity:.1,color:d(t[a[e]].name+t[a[e]].id)},itemStyle:{color:d(t[a[e]].name+t[a[e]].id)},data:u};i.series.push(f)}return n&&(i=w(i,n)),i}window.Alpine=l;window.CTFd=s;const g=window.scoreboardUpdateInterval||3e5;l.data("ScoreboardDetail",()=>({data:{},show:!0,activeBracket:null,async update(){this.data=await s.pages.scoreboard.getScoreboardDetail(10,this.activeBracket);let o=window.scoreboardChartOptions,t=k(s.config.userMode,this.data,o);S(this.$refs.scoregraph,t),this.show=Object.keys(this.data).length>0},async init(){this.update(),setInterval(()=>{this.update()},g)}}));l.data("ScoreboardList",()=>({standings:[],brackets:[],activeBracket:null,search:"",async update(){this.brackets=await s.pages.scoreboard.getBrackets(s.config.userMode),this.standings=(await s.pages.scoreboard.getScoreboard()).map((o,t)=>({...o,rank:t+1}))},get filteredStandings(){return this.standings.filter(o=>{const t=this.activeBracket?o.bracket_id==this.activeBracket:!0,n=o.name.toLowerCase().includes(this.search.toLowerCase());return t&&n})},async init(){this.$watch("activeBracket",o=>{this.$dispatch("bracket-change",o)}),this.update(),setInterval(()=>{this.update()},g)}}));l.start();
